<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results: {{ query }} - Northwest Custom Apparel</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='home-style.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='product-styles.css') }}" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
</head>
<body>
    <!-- Header Navigation -->
    <header class="main-header">
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="/">
                    <img src="{{ url_for('static', filename='images/nwca-logo.png') }}" alt="Northwest Custom Apparel" class="logo">
                    Northwest Custom Apparel
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarMain">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="/">Home</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarProducts" role="button" data-bs-toggle="dropdown">
                                Products
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarProducts">
                                <li><a class="dropdown-item" href="/customer/category/T-Shirts">T-Shirts</a></li>
                                <li><a class="dropdown-item" href="/customer/category/Polos">Polos</a></li>
                                <li><a class="dropdown-item" href="/customer/category/Sweatshirts">Sweatshirts & Fleece</a></li>
                                <li><a class="dropdown-item" href="/customer/category/Jackets">Jackets & Outerwear</a></li>
                                <li><a class="dropdown-item" href="/customer/category/Workwear">Workwear</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="/customer/category/Ladies">Ladies</a></li>
                                <li><a class="dropdown-item" href="/customer/category/Youth">Youth</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="/customer/category/Bags">Bags</a></li>
                                <li><a class="dropdown-item" href="/customer/category/Hats">Hats & Caps</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/mockup">Design Studio</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/quote">Quote Cart</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/#contact">Contact Us</a>
                        </li>
                    </ul>
                    
                    <!-- Search Form -->
                    <form class="d-flex" id="product-search-form" action="/search" method="get">
                        <div class="input-group">
                            <input class="form-control" type="search" name="q" placeholder="Search by style or keyword" aria-label="Search" value="{{ query }}">
                            <button class="btn btn-outline-light" type="submit">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </form>
                    
                    <!-- Quote Cart Icon -->
                    <div class="quote-cart-icon ms-3">
                        <a href="/quote" class="btn btn-light position-relative">
                            <i class="fas fa-shopping-cart"></i>
                            <span id="quote-cart-badge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                                0
                            </span>
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Search Results Banner -->
    <section class="search-banner">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">Home</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Search Results</li>
                        </ol>
                    </nav>
                    <h1>Search Results for "{{ query }}"</h1>
                    <p class="lead">{{ result_count }} products found</p>
                </div>
                <div class="col-md-4 text-end">
                    <div class="dropdown">
                        <button class="btn btn-outline-primary dropdown-toggle" type="button" id="sortDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            Sort By
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="sortDropdown">
                            <li><a class="dropdown-item" href="#">Price: Low to High</a></li>
                            <li><a class="dropdown-item" href="#">Price: High to Low</a></li>
                            <li><a class="dropdown-item" href="#">Newest</a></li>
                            <li><a class="dropdown-item" href="#">Best Selling</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container py-5">
        <div class="row">
            <!-- Sidebar with Filters -->
            <div class="col-lg-3 mb-4">
                <div class="sidebar-container">
                    <div class="sidebar-header">
                        <h3>Filters</h3>
                    </div>
                    <div class="sidebar-content">
                        <!-- Category Filter -->
                        <div class="filter-section">
                            <h4>Category</h4>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="categoryFilter1">
                                <label class="form-check-label" for="categoryFilter1">
                                    T-Shirts
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="categoryFilter2">
                                <label class="form-check-label" for="categoryFilter2">
                                    Polos
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="categoryFilter3">
                                <label class="form-check-label" for="categoryFilter3">
                                    Sweatshirts & Fleece
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="categoryFilter4">
                                <label class="form-check-label" for="categoryFilter4">
                                    Jackets & Outerwear
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="categoryFilter5">
                                <label class="form-check-label" for="categoryFilter5">
                                    Workwear
                                </label>
                            </div>
                        </div>

                        <!-- Price Range Filter -->
                        <div class="filter-section mt-4">
                            <h4>Price Range</h4>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="priceRange1">
                                <label class="form-check-label" for="priceRange1">
                                    Under $10
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="priceRange2">
                                <label class="form-check-label" for="priceRange2">
                                    $10 - $20
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="priceRange3">
                                <label class="form-check-label" for="priceRange3">
                                    $20 - $30
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="priceRange4">
                                <label class="form-check-label" for="priceRange4">
                                    $30 - $50
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="priceRange5">
                                <label class="form-check-label" for="priceRange5">
                                    Over $50
                                </label>
                            </div>
                        </div>

                        <!-- Brand Filter -->
                        <div class="filter-section mt-4">
                            <h4>Brand</h4>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="brandFilter1">
                                <label class="form-check-label" for="brandFilter1">
                                    Port & Company
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="brandFilter2">
                                <label class="form-check-label" for="brandFilter2">
                                    Port Authority
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="brandFilter3">
                                <label class="form-check-label" for="brandFilter3">
                                    District
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="brandFilter4">
                                <label class="form-check-label" for="brandFilter4">
                                    Sport-Tek
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="brandFilter5">
                                <label class="form-check-label" for="brandFilter5">
                                    New Era
                                </label>
                            </div>
                        </div>

                        <!-- Color Filter -->
                        <div class="filter-section mt-4">
                            <h4>Color</h4>
                            <div class="color-filters">
                                <div class="color-filter" style="background-color: #000000;" title="Black"></div>
                                <div class="color-filter" style="background-color: #ffffff; border: 1px solid #dee2e6;" title="White"></div>
                                <div class="color-filter" style="background-color: #0000ff;" title="Blue"></div>
                                <div class="color-filter" style="background-color: #ff0000;" title="Red"></div>
                                <div class="color-filter" style="background-color: #4169e1;" title="Royal"></div>
                                <div class="color-filter" style="background-color: #000080;" title="Navy"></div>
                                <div class="color-filter" style="background-color: #808080;" title="Grey"></div>
                                <div class="color-filter" style="background-color: #008000;" title="Green"></div>
                                <div class="color-filter" style="background-color: #ffa500;" title="Orange"></div>
                                <div class="color-filter" style="background-color: #800080;" title="Purple"></div>
                            </div>
                        </div>

                        <!-- Apply Filters Button -->
                        <div class="filter-actions mt-4">
                            <button class="btn btn-primary w-100">Apply Filters</button>
                            <button class="btn btn-outline-secondary w-100 mt-2">Clear All</button>
                        </div>
                    </div>
                </div>

                <!-- Quick Style Search Widget -->
                <div class="sidebar-container mt-4">
                    <div class="sidebar-header">
                        <h3>Quick Style Search</h3>
                    </div>
                    <div class="sidebar-content">
                        <form id="style-search-form" class="mb-3">
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Enter style #" id="style-search-input">
                                <button class="btn btn-primary" type="submit">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Search Results Grid -->
            <div class="col-lg-9">
                <div class="search-results-grid">
                    {% if results %}
                        <div class="row">
                            {% for product in results %}
                                <div class="col-md-4 mb-4">
                                    <div class="product-card h-100">
                                        <div class="product-image-container">
                                            <img src="{{ product.image_url }}" alt="{{ product.product_name }}" class="product-image">
                                        </div>
                                        <div class="product-info">
                                            <h5 class="product-title">{{ product.product_name }}</h5>
                                            <p class="product-style">{{ product.style }}</p>
                                            <div class="product-colors">
                                                {% for color in product.catalog_colors[:5] %}
                                                    <div class="color-dot" title="{{ color }}"></div>
                                                {% endfor %}
                                                {% if product.catalog_colors|length > 5 %}
                                                    <div class="color-dot-more">+{{ product.catalog_colors|length - 5 }}</div>
                                                {% endif %}
                                            </div>
                                            <p class="product-price">${{ "%.2f"|format(product.price) }}</p>
                                            <div class="product-actions">
                                                <a href="/product/{{ product.style }}" class="btn btn-primary btn-sm">View Details</a>
                                                <button class="btn btn-outline-primary btn-sm add-to-quote" 
                                                        data-style="{{ product.style }}"
                                                        data-name="{{ product.product_name }}"
                                                        data-price="{{ product.price }}">
                                                    Add to Quote
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="no-results-found">
                            <div class="alert alert-info">
                                <h4 class="alert-heading">No results found!</h4>
                                <p>We couldn't find any products matching "{{ query }}". Please try another search term or browse our categories.</p>
                                <hr>
                                <p class="mb-0">
                                    <strong>Search Tips:</strong>
                                    <ul>
                                        <li>Check the spelling of your search term</li>
                                        <li>Try using more general keywords</li>
                                        <li>Try searching by style number (e.g., PC61)</li>
                                        <li>Browse products by category using the navigation menu</li>
                                    </ul>
                                </p>
                            </div>
                            
                            <!-- Popular Searches -->
                            <div class="mt-4">
                                <h4>Popular Searches</h4>
                                <div class="popular-searches">
                                    <a href="/search?q=tshirt" class="btn btn-outline-primary m-1">T-shirts</a>
                                    <a href="/search?q=polo" class="btn btn-outline-primary m-1">Polos</a>
                                    <a href="/search?q=hoodie" class="btn btn-outline-primary m-1">Hoodies</a>
                                    <a href="/search?q=jacket" class="btn btn-outline-primary m-1">Jackets</a>
                                    <a href="/search?q=hat" class="btn btn-outline-primary m-1">Hats</a>
                                </div>
                            </div>
                            
                            <!-- Featured Products -->
                            <div class="mt-5">
                                <h4>You might be interested in</h4>
                                <div class="row">
                                    <div class="col-md-4 mb-4">
                                        <div class="product-card h-100">
                                            <div class="product-image-container">
                                                <img src="{{ url_for('static', filename='images/product-pc61.jpg') }}" alt="Essential Tee" class="product-image">
                                            </div>
                                            <div class="product-info">
                                                <h5 class="product-title">Port & Company Essential Tee</h5>
                                                <p class="product-style">PC61</p>
                                                <p class="product-price">$3.49</p>
                                                <div class="product-actions">
                                                    <a href="/product/PC61" class="btn btn-primary btn-sm">View Details</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-4">
                                        <div class="product-card h-100">
                                            <div class="product-image-container">
                                                <img src="{{ url_for('static', filename='images/product-k500.jpg') }}" alt="Silk Touch Polo" class="product-image">
                                            </div>
                                            <div class="product-info">
                                                <h5 class="product-title">Port Authority Silk Touch Polo</h5>
                                                <p class="product-style">K500</p>
                                                <p class="product-price">$13.99</p>
                                                <div class="product-actions">
                                                    <a href="/product/K500" class="btn btn-primary btn-sm">View Details</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-4">
                                        <div class="product-card h-100">
                                            <div class="product-image-container">
                                                <img src="{{ url_for('static', filename='images/product-j790.jpg') }}" alt="Glacier Soft Shell Jacket" class="product-image">
                                            </div>
                                            <div class="product-info">
                                                <h5 class="product-title">Port Authority Glacier Soft Shell Jacket</h5>
                                                <p class="product-style">J790</p>
                                                <p class="product-price">$30.59</p>
                                                <div class="product-actions">
                                                    <a href="/product/J790" class="btn btn-primary btn-sm">View Details</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                </div>

                <!-- Pagination (only show if there are results) -->
                {% if results and results|length > 12 %}
                    <nav aria-label="Search results pagination" class="mt-5">
                        <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">Next</a>
                            </li>
                        </ul>
                    </nav>
                {% endif %}
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-light py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4 mb-md-0">
                    <h5>Northwest Custom Apparel</h5>
                    <p>Your trusted partner for quality custom apparel and promotional products since 2005.</p>
                </div>
                
                <div class="col-md-2 mb-4 mb-md-0">
                    <h5>Quick Links</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item"><a href="/" class="nav-link text-light p-0 mb-1">Home</a></li>
                        <li class="nav-item"><a href="/customer/category/All" class="nav-link text-light p-0 mb-1">Products</a></li>
                        <li class="nav-item"><a href="/mockup" class="nav-link text-light p-0 mb-1">Design Studio</a></li>
                        <li class="nav-item"><a href="/quote" class="nav-link text-light p-0 mb-1">Quote Cart</a></li>
                    </ul>
                </div>
                
                <div class="col-md-3 mb-4 mb-md-0">
                    <h5>Popular Categories</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item"><a href="/customer/category/T-Shirts" class="nav-link text-light p-0 mb-1">T-Shirts</a></li>
                        <li class="nav-item"><a href="/customer/category/Polos" class="nav-link text-light p-0 mb-1">Polos</a></li>
                        <li class="nav-item"><a href="/customer/category/Jackets" class="nav-link text-light p-0 mb-1">Jackets</a></li>
                        <li class="nav-item"><a href="/customer/category/Hats" class="nav-link text-light p-0 mb-1">Hats & Caps</a></li>
                    </ul>
                </div>
                
                <div class="col-md-3">
                    <h5>Newsletter</h5>
                    <p>Subscribe to get the latest product updates and offers.</p>
                    <form id="footer-newsletter-form">
                        <div class="input-group mb-3">
                            <input type="email" class="form-control" placeholder="Your email" required>
                            <button class="btn btn-primary" type="submit">Subscribe</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <hr class="my-4 bg-light">
            
            <div class="d-flex flex-column flex-md-row justify-content-between">
                <p class="mb-2 mb-md-0">&copy; 2025 Northwest Custom Apparel. All rights reserved.</p>
                <div>
                    <a href="#" class="text-light me-3">Privacy Policy</a>
                    <a href="#" class="text-light me-3">Terms of Service</a>
                    <a href="#" class="text-light">Shipping Policy</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Notification Container -->
    <div id="notification-container"></div>

    <!-- Bootstrap and Required JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom Scripts -->
    <script src="{{ url_for('static', filename='quote-cart.js') }}"></script>
    <script>
        // Initialize style search form
        document.getElementById('style-search-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const styleInput = document.getElementById('style-search-input').value.trim();
            if (styleInput) {
                window.location.href = '/product/' + styleInput;
            }
        });
        
        // Create color dots with appropriate colors
        document.querySelectorAll('.product-card .color-dot').forEach(function(dot, index) {
            const colors = [
                '#000000', // Black
                '#0000ff', // Blue
                '#ff0000', // Red
                '#ffffff', // White
                '#008000', // Green
                '#4169e1', // Royal
                '#000080', // Navy
                '#808080', // Grey
                '#ffa500', // Orange
                '#800080'  // Purple
            ];
            dot.style.backgroundColor = colors[index % colors.length];
            if (colors[index % colors.length] === '#ffffff') {
                dot.style.border = '1px solid #dee2e6';
            }
        });
    </script>
</body>
</html>